<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8">
    <title>Connexion</title>
    <link rel="icon" type="image/png" href="_assets/img/logoWeb.png">
    <link rel="stylesheet" href="assets/styles.css">
</head>

<body>
    <h1 id="identifier">S'identifier</h1>
    <img src="assets/img/imgco.png" id="imgcon" alt="imgDebut">

    <div class="container" action="connect.php" method="post">
        <div class="parent">
            <label for="mail">EMAIL</label>
            <input type="email" id="mail" name="mail" placeholder="jean.bertrand@gmail.com">
        </div>
        <div class="parent">
            <label for="password">MOT DE PASSE</label>
            <input type="password" id="password" name="password">
        </div>
        <button type="submit" id="valider_co">VALIDER</button>
    </div>
</body>

<script>
    document.getElementById('connexionForm').addEventListener('submit', function (event) {
        event.preventDefault(); // Empêche la soumission du formulaire par défaut

        // Récupère les valeurs du formulaire
        const email = document.getElementById('mail').value;
        const motDePasse = document.getElementById('mdp').value;

        // Requête AJAX pour soumettre les données du formulaire à l'API
        fetch('/connexion', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ email, motDePasse }),
        })
            .then(response => response.json())
            .then(data => {
                // Traitez la réponse de l'API
                if (data.authentifie) {
                    // Authentification réussie, redirigez ou faites ce que vous voulez ici
                    console.log('Authentification réussie');
                } else {
                    // Authentification échouée
                    console.log('Authentification échouée');
                }
            })
            .catch(error => {
                console.error('Erreur lors de la connexion :', error);
            });
    });
</script>

</html>